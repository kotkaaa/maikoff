
var objFilters=new CFilters(),CategoryFilters=objFilters.init(),Filters=objFilters.init_filters(),MobileFilters=objFilters.init_mobile();$(function(){Filters.initialize();MobileFilters.initialize();CategoryFilters.initFilterActions("#filters_form");CategoryFilters.initFilterActions("#filters_form_mobile");CategoryFilters.initFilterActions("#filters_subcategories");CategoryFilters.initUpdatePage(100);$("#pager").on("click",".btn-load-more",function(b){b.preventDefault();var a=$(this).data("href");AjaxLoadMore(a)})});function CFilters(){var b={initFilterActions:function(d){var e=this;$(d).on("click",".filter-element",function(i){i.preventDefault();var h=$(this).hasClass("filter-element")?$(this):$(this).find(".filter-element"),f=((typeof $(h).attr("data-href")!="undefined")?$(h).attr("data-href"):$(h).attr("href")),g=h.hasClass("disabled");if(!g){e.forceUpdatePage(f)}})},initUpdatePage:function(e){var d=this;if(typeof jQuery!="undefined"&&typeof window.History!="undefined"){$(window).on("statechange",function(){d.AjaxUpdatePage(window.location.href)})}else{setTimeout(function(){d.initUpdatePage(e)},e)}},forceUpdatePage:function(e){var d=this;if(History.enabled){History.pushState(null,document.title,e)}else{d.AjaxUpdatePage(e)}},AjaxUpdatePage:function(h){var s=this,q=$("#filters_form"),r=$("#filters_form_mobile"),i=$("#selected_filters"),j=$("#filters_subcategories"),n=$("#mToolbar"),m=$("#products"),f=$("#pager"),l=$(".page-heading"),k=$("#control_view"),e=$(".content.seo"),o=$(".breadcrumbs"),g=document.getElementsByTagName("title")[0],d=document.getElementsByName("description")[0],p=document.getElementsByName("keywords")[0];$.ajax({url:h,type:"POST",dataType:"json",data:{ajaxUpdate:1},beforeSend:function(){q.addClass("load");r.addClass("load");m.addClass("load")},complete:function(t){q.removeClass("load");r.removeClass("load");m.removeClass("load")},success:function(u){if(u){if(u.redirect_url){window.location.assign(u.redirect_url)}if(u.filters){q.html(u.filters)}if(u.filters_mobile){r.html(u.filters_mobile)}if(u.subcategories){j.html(u.subcategories)}if(typeof u.selected_filters!="undefined"){i.html(u.selected_filters)}if(u.total_pages&&parseInt(u.total_pages)>1){f.removeClass("hidden")}else{f.addClass("hidden")}if(u.pager){f.html(u.pager)}if(u.selected_count){var t=parseInt(u.selected_count);n.find(".selected-count").text(t>0?"+"+t:"")}else{n.find(".selected-count").text("")}if(u.breadcrumbs&&o.length){o.html(u.breadcrumbs)}if(u.products&&m.length){m.html(u.products)}if(typeof u.h_title!="undefined"&&l.length){l.text(u.h_title)}if(typeof u.seo_text!="undefined"&&e.length){e.html(u.seo_text)}if(typeof u.meta_descr!="undefined"){$(d).attr("content",u.meta_descr)}if(typeof u.meta_key!="undefined"){$(p).attr("content",u.meta_key)}if(typeof u.seo_title!="undefined"){g.innerHtml=u.seo_title;document.title=u.seo_title}var w=$("#sMetaRobots");if(typeof u.meta_robots!="undefined"){var v='<meta id="sMetaRobots" name="robots" content="'+u.meta_robots+'">';if(w.length){$(w).replaceWith(v)}else{$("head").append(v)}}else{if(w){w.remove()}}if(u.search_result){$(".search_result").html(u.search_result)}}s.initFilterActions("#selected_filters");s.initFilterActions("#control_view");s.initFilterActions("#filters_subcategories");window.Filters.initialize();window.MobileFilters.initialize()}});return false}},c={form:null,catalog:null,sections:null,construct:function(){var d=this;d.form=$("#filters_form");d.catalog=d.form.children(".catalog");d.sections=d.form.children(".section")},initialize:function(){var d=this;d.construct();d.form.find(".section-toggle").on("click",function(h){h.preventDefault();var f=$(this),g=f.closest(".section");f.toggleClass("on");g.toggleClass("collapsed")});d.form.on("mouseenter",".catalog",function(){$(this).stop("br").addClass("hover");$(this).delay(400).queue(function(e){if($(this).hasClass("hover")){$(this).addClass("open")}e()})}).on("mouseleave",".catalog",function(){$(this).removeClass("hover");$(this).delay(400).queue(function(e){if(!$(this).hasClass("hover")){$(this).removeClass("open")}e()})}).on("click",".catalog .filter-shift",function(h){h.preventDefault();var f=d.form.find(".catalog .root"),g=$(this).next(".sublevel");f.addClass("shift");f.find(".sublevel").removeClass("shift");g.addClass("shift")}).on("click",".catalog .return",function(h){h.preventDefault();var f=d.form.find(".catalog .root"),g=$(this).closest(".sublevel");f.removeClass("shift");g.removeClass("shift")}).on("click",".close",function(f){f.preventDefault();d.form.find(".catalog").stop().removeClass("hover").removeClass("open")})}},a={active:false,toolbar:null,filters_trigger:null,sorting_trigger:null,body:null,root:null,form:null,sections:null,construct:function(){var d=this;d.body=$(".page-body");d.root=$(".filters-popup");d.form=d.root.children(".filters-form");d.sections=d.form.children(".section");d.toolbar=$(".toolbar");d.filters_trigger=d.toolbar.find('[data-toggle="filters"]');d.sorting_trigger=d.toolbar.find('[data-toggle="sorting"]')},initialize:function(){var d=this;d.construct();d.root.on("click",function(f){f.stopPropagation()});d.toolbar.on("click",'[data-toggle="filters"]',function(f){f.stopPropagation();d.open()}).on("click",'[data-toggle="sorting"], [data-toggle="category"]',function(g){g.stopPropagation();d.open();var f=d.form.children('[data-section="'+$(this).data("toggle")+'"]');if(f.length){d.openSection(f)}});d.sections.on("click",".section-toggle",function(g){g.stopPropagation();d.open();var f=$(this).closest(".section");if(f.length){d.toggleSection(f)}});d.sections.find(".level-more").children("a").on("click",function(j){j.preventDefault();var g=$(this),i=g.closest(".section"),f=g.closest(".level-more"),h=i.find(".list");f.addClass("opened");h.addClass("shift");i.children(".section-wrap").scrollTop(0)});d.sections.find(".return").on("click",function(j){j.preventDefault();var g=$(this),i=g.closest(".section"),f=g.closest(".level-more"),h=i.find(".list");f.removeClass("opened");h.removeClass("shift")});d.body.on("click",function(f){if(d.active){f.preventDefault();f.stopPropagation();d.toggle()}});d.root.swipe({swipeLeft:function(g,i,k,h,e,f,j){g.preventDefault();if(k>=50){d.toggle()}console.log("You swiped "+i)}})},toggle:function(){var d=this;if(d.active){d.close()}else{d.open()}},open:function(){var d=this;d.beforeOpen();d.root.addClass("shift");d.body.addClass("turn-left");$("html,body").addClass("noswipe");d.active=true},beforeOpen:function(){var d=this;d.body.removeClass("turn-down").removeClass("turn-left").removeClass("turn-right").removeClass("fixed").removeClass("noswipe");$(".header-container").find(".drop-down-phone").removeClass("show");$(".header-container").find(".btn-mob-phone").removeClass("active");$(".header-container").find(".drop-down-recall").addClass("hidden");$(".header-container").find(".search").removeClass("show");$(".header-container").find(".btn-search-mob").removeClass("active");$(".header-container").find(".center-section").removeClass("height")},close:function(){var d=this;d.root.removeClass("shift");d.body.removeClass("turn-left");$("html,body").removeClass("noswipe");$.map(d.sections,function(e){d.closeSection(e)});d.active=false},openSection:function(f){var d=this;$(f).addClass("expanded");var e=$(f).children(".section-wrap");$(e).perfectScrollbar()},closeSection:function(e){var d=this;$(e).removeClass("expanded")},toggleSection:function(e){var d=this;if($(e).hasClass("expanded")){d.closeSection(e)}else{d.openSection(e)}},apply:function(){var d=this;d.close()},cancel:function(){var d=this;d.close()}};this.init=function(){return b};this.init_filters=function(){return c};this.init_mobile=function(){return a}}function AjaxLoadMore(a){var c=$("#products"),b=$("#pager");$.ajax({url:a,type:"POST",dataType:"json",data:{ajaxLoadMore:1},success:function(d){if(d){if(d.products){c.find(".product-next-page").remove();c.append(d.products)}if(d.pager){b.html(d.pager)}}}});return false};