function RequestModalForm(){var e={form:null,btn_upload:null,btn_attach:null,div_attachments:null,div_items:null,cnt_items:0,product_substrates:null,product_colors:null,max_files:3,construct:function(){var e=this;e.form=$("#requestForm"),e.btn_upload=e.form.find("#requestFileUpload"),e.btn_attach=e.form.find(".btn-attach"),e.div_attachments=e.form.find(".attachments"),e.div_items=e.form.find(".selected-items"),e.cnt_items=e.div_items.children(".selected-item:not(.empty)").size(),e.product_substrates=new Object,e.product_colors=new Object},init:function(){var e=this;e.construct(),e.draw_instance()},draw_instance:function(){var e=this;e.form.on("click",".btn-add-new",function(t){t.preventDefault();var n=e.div_items.children(".selected-item:not(.empty)").size();0==n&&e.div_items.html(""),e.addItemRow()}),e.form.on("click",".spin-del",function(t){t.preventDefault(),$(this).closest(".selected-item").remove();var n=e.div_items.children(".selected-item:not(.empty)").size(),i='<div class="selected-item empty">';i+='   <button class="btn btn-primary btn-xl btn-add-new">Добавить новый тип товара</button>',i+="</div>",0==n&&e.div_items.prepend(i)}),e.div_attachments.on("click","a",function(t){t.preventDefault(),$(this).closest("span").remove(),e.recalcUploadedFiles()}),e.btn_upload.fileupload({url:"/interactive/ajax.php?zone=site&action=ajaxFileUpload",dataType:"json",autoUpload:!0,singleFileUploads:!1}).on("fileuploadstart",function(){e.btn_attach.addClass("progress")}).on("fileuploaddone",function(t,n){var i="";$.map(n.result.files,function(e){e.error?alert("Файл не соответствует требованиям или достигнут лимит файлов!"):e.name&&(i+="<span>",i+='<input type="hidden" name="attachments[]" value="'+e.name+'"/>'+e.name,i+=' <a href="#">&times;</a>',i+="</span>")}),e.div_attachments.append(i),e.btn_attach.removeClass("progress"),e.recalcUploadedFiles()}),e.form.ajaxForm({dataType:"json",data:{source_name:document.title,source_url:window.location.href},success:function(t){if(t.errors)for(var n in t.errors)e.form.find('input[name="'+n+'"]').addClass("error");t.output&&(Modal.replace(t.output),send_event("Успешно отправлено","Форма просчета"))},beforeSubmit:function(){e.form.find("input.error").removeClass("error")}})},recalcUploadedFiles:function(){var e=this,t=e.div_attachments.children("span").size();t>=e.max_files?e.btn_attach.prop("disabled",!0):e.btn_attach.prop("disabled",!1)},addItemRow:function(){var e=this,t="";t+='<div class="selected-item">',t+='   <div class="flex">',t+='       <div class="select-type">',t+='           <div class="f-row item-type">',t+='               <label class="f-label">Тип товара под печать</label>',t+='               <select class="select-color wide" name="items['+e.cnt_items+'][type]">',t+='                   <option value="">Не выбрано</option>';for(var n in e.substrates)t+='               <option value="'+e.substrates[n].title+'">'+e.substrates[n].title+"</option>";t+="               </select>",t+="           </div>",t+='           <div class="f-row f-row-flex">',t+='               <div class="f-col item-color">',t+='                   <label class="f-label">Цвет одежды</label>',t+='                   <select class="select-color wide" name="items['+e.cnt_items+'][color]">',t+='                       <option value="">Не выбрано</option>';for(var n in e.product_colors)t+='                   <option data-color="#'+e.product_colors[n].hex+'" value="'+e.product_colors[n].title+'">'+e.product_colors[n].title+"</option>";t+="                   </select>",t+="               </div>",t+='               <div class="f-col item-qty">',t+='                   <label class="f-label">Количество</label>',t+='                   <div class="spin-edit js-ready">',t+='                       <button class="spin-btn spin-down spin-del"></button>',t+='                       <input type="text" value="1" name="items['+e.cnt_items+'][qty]">',t+='                       <button class="spin-btn spin-up"></button>',t+="                   </div>",t+="               </div>",t+="           </div>",t+="       </div>",t+='       <div class="select-settings">',t+='           <label class="f-label">Нанести лого/принт</label>',t+='           <div class="position">',t+='               <input type="checkbox" class="hidden" name="items['+e.cnt_items+'][print][]" id="front_'+e.cnt_items+'" value="front"/>',t+='               <label class="checkbox" for="front_'+e.cnt_items+'">спереди</label>',t+='               <div class="size">',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][front]" id="size_front_'+e.cnt_items+'_1" value="A6" checked/>',t+='                   <label class="radio" for="size_front_'+e.cnt_items+'_1">A6</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][front]" id="size_front_'+e.cnt_items+'_2" value="A5"/>',t+='                   <label class="radio" for="size_front_'+e.cnt_items+'_2">A5</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][front]" id="size_front_'+e.cnt_items+'_3" value="A4"/>',t+='                   <label class="radio" for="size_front_'+e.cnt_items+'_3">A4</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][front]" id="size_front_'+e.cnt_items+'_4" value="A3"/>',t+='                   <label class="radio" for="size_front_'+e.cnt_items+'_4">A3</label>',t+="               </div>",t+='               <div class="hint">',t+="               </div>",t+="           </div>",t+='           <div class="position">',t+='               <input type="checkbox" class="hidden" name="items['+e.cnt_items+'][print][]" id="rear_'+e.cnt_items+'" value="rear"/>',t+='               <label class="checkbox" for="rear_'+e.cnt_items+'">на спине</label>',t+='               <div class="size">',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][rear]" id="size_rear_'+e.cnt_items+'_1" value="A6" checked/>',t+='                   <label class="radio" for="size_rear_'+e.cnt_items+'_1">A6</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][rear]" id="size_rear_'+e.cnt_items+'_2" value="A5"/>',t+='                   <label class="radio" for="size_rear_'+e.cnt_items+'_2">A5</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][rear]" id="size_rear_'+e.cnt_items+'_3" value="A4"/>',t+='                   <label class="radio" for="size_rear_'+e.cnt_items+'_3">A4</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][rear]" id="size_rear_'+e.cnt_items+'_4" value="A3"/>',t+='                   <label class="radio" for="size_rear_'+e.cnt_items+'_4">A3</label>',t+="               </div>",t+='               <div class="hint">',t+="               </div>",t+="           </div>",t+='           <div class="position">',t+='               <input type="checkbox" class="hidden" name="items['+e.cnt_items+'][print][]" id="arm_'+e.cnt_items+'" value="arm"/>',t+='               <label class="checkbox" for="arm_'+e.cnt_items+'">на рукаве</label>',t+='               <div class="size">',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][arm]" id="size_arm_'+e.cnt_items+'_1" value="A6" checked/>',t+='                   <label class="radio" for="size_arm_'+e.cnt_items+'_1">A6</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][arm]" id="size_arm_'+e.cnt_items+'_2" value="A5"/>',t+='                   <label class="radio" for="size_arm_'+e.cnt_items+'_2">A5</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][arm]" id="size_arm_'+e.cnt_items+'_3" value="A4"/>',t+='                   <label class="radio" for="size_arm_'+e.cnt_items+'_3">A4</label>',t+='                   <input type="radio" class="hidden" name="items['+e.cnt_items+'][arm]" id="size_arm_'+e.cnt_items+'_4" value="A3"/>',t+='                   <label class="radio" for="size_arm_'+e.cnt_items+'_4">A3</label>',t+="               </div>",t+='               <div class="hint">',t+="               </div>",t+="           </div>",t+="       </div>",t+="   </div>",t+='   <button class="btn btn-primary btn-xl btn-add-new">Добавить новый тип товара</button>',t+="</div>",e.div_items.append(t),Modal.draw(),e.cnt_items++},removeItemRow:function(){},setParams:function(e){var t=this;for(var n in e)t[n]=e[n]}};this.init=function(){return e}}function CModal(){var e={selector:null,popup:null,instance:null,params:{hashTracking:!1,closeOnOutsideClick:!0},construct:function(){var e=this;e.selector='[data-remodal-id="popup_modal"]',e.popup=$(e.selector)},initialize:function(){var e=this;e.construct(),e.instance=e.popup.remodal(e.params)},open:function(e){var t=this,n=t.load(e);"undefined"!=typeof n&&(t.replace(n),t.instance.open()),send_event("Нажатие","Форма просчета")},close:function(){var e=this;e.destruct(),e.instance.close()},load:function(e){var t=this,n=null;return $.ajax({url:e,type:"GET",async:!1,complete:function(e){if(200==e.status){var t=e.responseText;"undefined"!=typeof t&&(n=t)}},beforeSend:function(){t.destruct()}}),n},draw:function(){var e=this;e.popup.find(".select-color").colorSelect("destroy"),e.popup.find(".select-color").colorSelect(),e.popup.find('input[type="tel"]').inputmask({mask:"+38 999 999-99-99",greedy:!1,definitions:{"*":{validator:"[0-9 ]",cardinality:1,casing:"lower"}}}),e.popup.find(".btn-attach").tooltipster({content:$("#tooltip_attach_files"),contentCloning:!0,theme:"tooltipster-shadow"})},replace:function(e){var t=this;t.popup.children(".response").html(e),t.draw()},destruct:function(){var e=this;e.popup.children(".response").html("")}};this.init=function(){return e}}function CBasket(){var e={empty:!0,opened:!1,button:null,widget:null,layout:null,checkout:null,shippingID:0,price:0,total_price:0,shipping_price:0,amount:0,items:null,files:null,storage:new Object,btn_upload:null,btn_upload_checkout:null,btn_attach:null,btn_attach_checkout:null,div_attachments:null,div_attachments_checkout:null,upload_options:{url:"/interactive/ajax.php?zone=site&action=basket&option=ajaxFileUpload",forceIframeTransport:!0,autoUpload:!0,sequentialUploads:!0,singleFileUploads:!1},construct:function(){var e=this;e.button=$(".header-container").find(".btn-basket"),e.widget=$(".header-container").find(".basket-dropdown"),e.layout=$("#basketLayout"),e.checkout=$("#basketCheckout"),e.btn_upload=e.widget.find("#basketFileUpload"),e.btn_attach=e.widget.find(".btn-attach"),e.btn_upload_checkout=$("#checkoutFileUpload"),e.btn_attach_checkout=$("#checkoutAttachBtn"),e.div_attachments=e.widget.find(".attachments"),e.div_attachments_checkout=$("#checkoutAttachments");var t=window.localStorage.getItem("checkoutFormData");null!==t&&(e.storage=JSON.parse(t))},destruct:function(){var e=this;return window.localStorage.setItem("checkoutFormData",JSON.stringify(e.storage)),!0},initialize:function(){var e=this;e.construct(),e.button.off("click").off("mouseenter"),e.button.on("click",function(t){t.stopPropagation(),e.toggle()}).on("mouseenter",function(){$(this).addClass("hover-on"),setTimeout(function(){e.button.hasClass("hover-on")&&!e.opened&&e.open()},300)}).on("mouseleave",function(){$(this).removeClass("hover-on")}),e.widget.off("click"),e.widget.on("click",function(e){e.stopPropagation()}),$("body").on("click",function(){e.opened&&e.close()}),e.btn_attach.off("click"),e.btn_attach.on("click",function(t){t.preventDefault(),e.btn_upload.trigger("click")}),e.btn_attach_checkout.off("click"),e.btn_attach_checkout.on("click",function(t){t.preventDefault(),e.btn_upload_checkout.trigger("click")}),e.div_attachments.off("click","a"),e.div_attachments.on("click","a",function(t){t.preventDefault();var n=$(this).closest("span").data("file-id");e.deleteFile(n)}),e.div_attachments_checkout.off("click","a"),e.div_attachments_checkout.on("click","a",function(t){t.preventDefault();var n=$(this).closest("span").data("file-id");e.deleteFile(n)}),e.btn_upload.fileupload({url:"/interactive/ajax.php?zone=site&action=basket&option=ajaxFileUpload",forceIframeTransport:!0,autoUpload:!0,sequentialUploads:!0,singleFileUploads:!1}).on("fileuploadstart",function(){e.btn_attach.addClass("progress")}).on("fileuploaddone",function(){e.btn_attach.removeClass("progress"),e.update(),e.initialize()}),e.btn_upload_checkout.fileupload(e.upload_options).on("fileuploadstart",function(){e.btn_attach_checkout.addClass("progress")}).on("fileuploaddone",function(){e.btn_attach_checkout.removeClass("progress"),e.update(),e.initialize()}),null===e.items&&e.update(1);var t=$(".basket-quick-ckeckout"),n=t.find('input[type="tel"]'),i=t.find('button[type="submit"]'),o=/^\+38\s(044|039|050|063|066|067|068|091|092|093|094|095|096|097|098|099|073)+([\d\s\-]{10})$/;n.inputmask({mask:"+38 999 999-99-99",greedy:!1,definitions:{"*":{validator:"[0-9 ]",cardinality:1,casing:"lower"}}}),n.on("change blur keyup",function(){var t=$(n).val(),a=$(n).attr("name");e.storage[a]=t,0==t.length||null==t.match(o)?i.prop("disabled",!0):i.prop("disabled",!1),e.destruct()}),array_key_exists("phone",e.storage)&&$(n).val(e.storage.phone).trigger("change")},toggle:function(){var e=this;e.opened?e.close():e.open()},open:function(){var e=this;e.beforeOpen(),e.button.addClass("toggle-on"),e.widget.removeClass("hidden"),$("html,body").addClass("m-noscroll"),e.opened=!0},close:function(){var e=this;e.beforeClose(),e.button.removeClass("toggle-on"),e.widget.addClass("hidden"),$("html,body").removeClass("m-noscroll"),e.opened=!1},beforeOpen:function(){Search.close(),Callback.close(),MobileMenu.close()},beforeClose:function(){},add:function(e,t,n){var i=this,o=!1;return t=parseInt(t)||!1,n=n||!1,$.ajax({url:"/interactive/ajax.php",dataType:"json",async:!1,data:{zone:"site",action:"basket",option:"add",itemID:e,qty:t,recalc:n},success:function(){o=!0,i.update(),i.onAdd(e)}}),o},del:function(e,t){var n=this,i=!1;return t=parseInt(t)||1,$.ajax({url:"/interactive/ajax.php",dataType:"json",async:!1,data:{zone:"site",action:"basket",option:"remove",itemID:e,qty:t},success:function(){i=!0,n.update(),n.onDelete(e)}}),i},clear:function(){var e=this;$.ajax({url:"/interactive/ajax.php",dataType:"json",async:!1,data:{zone:"site",action:"basket",option:"clear"},success:function(){e.update(),e.onClear()}})},update:function(e){var t=this;e=e||0,$.ajax({url:"/interactive/ajax.php",dataType:"json",async:!1,data:{zone:"site",action:"basket",option:"update",initial:e},success:function(e){if(t.items=e.items,t.price=parseFloat(e.price),t.total_price=parseFloat(e.total_price),t.shipping_price=parseFloat(e.shipping_price),t.amount=parseInt(e.amount),t.shippingID=e.shippingID,t.empty=e.empty,e.output&&(t.layout.html(e.output.layout),t.widget.find("#basketTotal").text(number_format(t.price,0,"."," ")+" "),t.button.children(".cnt").text(t.amount),t.checkout.length&&t.checkout.html(e.output.checkout)),e.files&&(t.files=e.files,e.output)){var n="";for(var i in e.files)n+='<span data-file-id="'+i+'">',n+=e.files[i].title+' <a href="#">&times;</a>',n+="</span>";if(t.div_attachments.html(n),t.div_attachments_checkout.length){n="";for(var i in e.files)n+='<span data-file-id="'+i+'">',n+=e.files[i].name+' <a href="#">&times;</a>',n+="</span>";t.div_attachments_checkout.html(n)}}t.empty&&t.opened&&t.close(),t.button.prop("disabled",t.empty),t.recalcUploadedFiles(),t.onUpdate()}})},isSetKey:function(e){var t=this;return array_key_exists(e,t.items)},deleteFile:function(e){var t=this;$.ajax({url:"/interactive/ajax.php",dataType:"json",data:{zone:"site",action:"basket",option:"deleteFile",itemID:e},success:function(){t.update()}})},recalcUploadedFiles:function(){var e=this,t=e.div_attachments.children("span").size();t>=e.max_files?(e.btn_attach.prop("disabled",!0),e.btn_attach_checkout.prop("disabled",!0)):(e.btn_attach.prop("disabled",!1),e.btn_attach_checkout.prop("disabled",!1))},setShipping:function(e){var t=this;$.ajax({url:"/interactive/ajax.php",dataType:"json",data:{zone:"site",action:"basket",option:"setShipping",itemID:e},success:function(){t.update()}})},setPayment:function(e){var t=this;$.ajax({url:"/interactive/ajax.php",dataType:"json",data:{zone:"site",action:"basket",option:"setPayment",itemID:e},success:function(){t.update()}})},onAdd:function(){},onDelete:function(){},onUpdate:function(){},onClear:function(){}};this.init=function(){return e}}function LiveSearch(){var e={opened:!1,input:null,root:null,form:null,wrap:null,btn:null,construct:function(){var e=this;e.form=$("#qSearchForm"),e.wrap=e.form.closest(".form"),e.root=e.form.closest(".search"),e.btn=$(".btn-search"),e.input=e.form.children('input[type="search"]')},initialize:function(){var e=this;e.construct(),e.root.on("click",function(e){e.stopPropagation()}),e.btn.on("click",function(t){t.preventDefault(),e.toggle()}),e.form.on("click",".btn-close",function(t){t.preventDefault(),e.close()}),$("body").on("click",function(){e.opened&&e.close()}),e.input.autocomplete({source:function(t){$.ajax({url:e.form.attr("action"),type:"POST",data:{stext:t.term,livesearch:1},complete:function(t){if(200==t.status){var n=t.responseText;n.length&&(e.wrap.append(n),e.adjust())}},beforeSend:function(){e.clear()}})},minLength:3,scrollIntoView:!0,autoFocus:!0,delay:300})},toggle:function(){var e=this;e.opened?e.close():e.open()},open:function(){var e=this;e.beforeOpen(),$(".page-body").addClass("search-in"),e.root.addClass("opened"),e.wrap.removeClass("hidden"),e.input.val("").focus(),e.opened=!0},close:function(){var e=this;e.beforeClose(),$(".page-body").removeClass("search-in"),e.root.removeClass("opened"),e.wrap.addClass("hidden"),e.opened=!1},beforeOpen:function(){Callback.close(),Basket.close()},beforeClose:function(){var e=this;e.clear()},clear:function(){var e=this;e.wrap.children(".live-search").remove()},adjust:function(){var e=this,t=e.wrap.find(".live-search"),n=getMobileHeight();if(t.length){var i=(t.height(),e.wrap.offset().top),o=e.input.height(),a=15;t.css({maxHeight:Math.floor(n-(i+a+o))})}}};this.init=function(){return e}}function MegaMenu(){var e={active:!1,root:null,enter_class:null,hover_class:null,construct:function(){var e=this;e.root=$(".desktop-menu"),e.enter_class="mouseenter",e.hover_class="hover-in"},initialize:function(){var e=this;e.construct(),e.root.on("mouseenter",".level-more",function(){var t=$(this),n=e.active?0:500;t.addClass(e.enter_class),setTimeout(function(){e.openSubLevel(t)},n)}).on("mouseleave",".level-more",function(){var t=$(this);t.removeClass(e.enter_class),setTimeout(function(){e.closeSubLevel(t)},500)}).on("mouseenter","a",function(){var e=$(this),t=e.closest(".dropdown").find(".menu-hover-image"),n=e.data("hover-image");if(t.length){var i=t.data("original");"undefined"!=typeof n?t.prop("src",n):t.prop("src",i)}}).on("mouseleave","a",function(){var e=$(this),t=e.closest(".dropdown").find(".menu-hover-image");e.data("hover-image");if(t.length){var n=t.data("original");t.prop("src",n)}})},openSubLevel:function(e){var t=this,n=e.siblings("li");if(e.hasClass(t.enter_class)){for(var i=0;i<n.length;i++){var o=$(n[i]);t.closeSubLevel(o,!0)}e.addClass(t.hover_class),t.active=!0,Search.close(),Callback.close(),Basket.close()}return e.hasClass(t.hover_class)},closeSubLevel:function(e,t){t=t||!1;var n=this;e.hasClass(n.enter_class)||(e.removeClass(n.hover_class),t||(n.active=!1))}},t={active:!1,controller:null,container:null,catalog:null,body:null,construct:function(){var e=this;e.controller=$(".header-container").find(".icon-nav"),e.container=$(".mobile-menu"),e.catalog=e.container.children(".catalog"),e.body=$(".page-body")},initialize:function(){var e=this;e.construct(),e.controller.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.toggle()}),e.container.swipe({swipeLeft:function(t,n,i){t.preventDefault(),i>=50&&!e.catalog.hasClass("shift")&&e.toggle(),console.log("You swiped "+n)},swipeRight:function(t,n,i){t.preventDefault(),i>=50&&e.catalog.hasClass("shift")&&e.unshift(),console.log("You swiped "+n)}}),e.catalog.on("click",".level-more > a",function(t){var n=$(this).closest("li"),i=(n.hasClass("hover-in"),n.children(".sublevel"));i.length&&(t.preventDefault(),n.siblings("li").removeClass("hover-in"),n.addClass("hover-in"),e.shift())}).on("click",".return",function(t){t.preventDefault();var n=$(this).closest(".level-more"),i=n.hasClass("hover-in");i&&e.unshift()}).on("click",".close",function(t){t.preventDefault(),e.toggle()}),e.body.on("click",function(){e.container.hasClass("shift")&&e.toggle()})},toggle:function(){var e=this;e.active?e.close():e.open()},open:function(){var e=this;e.active||(e.beforeOpen(),e.container.addClass("shift"),e.body.addClass("turn-left"),$("html,body").addClass("noswipe"),e.active=!0)},beforeOpen:function(){var e=this;e.body.removeClass("turn-down").removeClass("turn-left").removeClass("turn-right").removeClass("fixed"),Callback.close(),Search.close(),Basket.close()},close:function(){var e=this;e.active&&(e.container.removeClass("shift"),e.body.removeClass("turn-left"),$("html,body").removeClass("noswipe"),e.active=!1)},shift:function(){var e=this;e.catalog.addClass("shift")},unshift:function(){var e=this;e.catalog.removeClass("shift"),e.catalog.find(".hover-in").removeClass("hover-in")}},n={sections:null,form:null,wrap:null,construct:function(){var e=this;e.form=$(".submenu"),e.sections=e.form.children(".section")},initialize:function(){var e=this;e.construct(),e.form.find(".section-toggle").on("click",function(e){var t=$(this),n=t.closest(".section");return t.hasClass("toggle-ready")?(e.preventDefault(),t.toggleClass("on"),void n.toggleClass("collapsed")):!0}),e.form.find(".level-more").children("a").on("click",function(e){e.preventDefault();var t=$(this),n=t.closest(".section"),i=t.closest(".level-more"),o=n.find(".list");i.addClass("opened"),o.addClass("shift")}),e.form.find(".return").on("click",".back",function(e){e.preventDefault();var t=$(this),n=t.closest(".section"),i=t.closest(".level-more"),o=n.find(".list");i.removeClass("opened"),o.removeClass("shift")}).on("click","a",function(e){var t=$(this),n=t.attr("href");null!=n.match(/^\#/)&&(e.preventDefault(),t.siblings(".back").trigger("click"))})}};this.init=function(){return e},this.init_mobile=function(){return t},this.init_sub=function(){return n}}function CCallback(){var e={button:null,dropdown:null,phones:null,form:null,result:null,opened:!1,construct:function(){var e=this;e.button=$(".header-container").find(".btn-phone"),e.dropdown=$(".header-container").find(".callback-dropdown"),e.phones=e.dropdown.find(".list-phones"),e.form=e.dropdown.find(".form"),e.result=e.dropdown.find(".result")},initialize:function(){var e=this;e.construct(),e.button.on("click",function(t){t.stopPropagation(),e.toggle()}),e.dropdown.on("click",function(e){e.stopPropagation()}),$("body").on("click",function(){e.opened&&e.close()})},toggle:function(){var e=this;e.opened?e.close():e.open()},open:function(){var e=this;e.beforeOpen(),e.button.addClass("cross"),e.dropdown.removeClass("hidden"),e.opened=!0},close:function(){var e=this;e.beforeClose(),e.button.removeClass("cross"),e.dropdown.addClass("hidden"),e.opened=!1},beforeOpen:function(){var e=this;e.destruct(),Search.close(),Basket.close()},beforeClose:function(){var e=this;e.destruct()},go:function(e){var t=this;switch(e){case 2:t.phones.addClass("hidden"),t.form.removeClass("hidden"),t.result.addClass("hidden");var n=t.form.children("form"),i=t.form.find('input[type="tel"]'),o=i.next(".btn");i.inputmask({mask:"+38 999 999-99-99",greedy:!1,definitions:{"*":{validator:"[0-9 ]",cardinality:1,casing:"lower"}}}),i.val("").focus(),i.on("keyup blur focusin",function(){var e=$(this).val(),t=/^\+38 0(\d{2}) \d{3}\-\d{2}-\d{2}$/;null==e.match(t)?o.prop("disabled",!0):o.prop("disabled",!1)}),n.ajaxForm({dataType:"json",data:{source_name:document.title,source_url:window.location.href},success:function(e){e.messages&&t.go(3)},beforeSubmit:function(){o.prop("disabled",!0)}}),send_event("Нажатие","Обратный звонок");break;case 3:t.phones.addClass("hidden"),t.form.addClass("hidden"),t.result.removeClass("hidden"),send_event("Успешно отправлено","Обратный звонок"),setTimeout(function(){t.close()},3e3);break;default:t.phones.removeClass("hidden"),t.form.addClass("hidden"),t.result.addClass("hidden")}},destruct:function(){var e=this;e.go(1)}};this.init=function(){return e}}function CSwiperSlider(){var e={slider:null,construct:function(e,t){var n=this;return e=e||".home-slider",t=t||{},n.slider=new Swiper(e,t),n.slider}};this.init=function(){return e}}function getOrientation(){return Modernizr.Detectizr.device.orientation}function getMobileWidth(){getOrientation();return verge.viewportW()}function getMobileHeight(){getOrientation();return verge.viewportH()}function isMobile(){var e=Modernizr.Detectizr.device;return"mobile"==e.type}function isWebKit(){var e=Modernizr.Detectizr.device;return"safari"==e.browser&&("iphone"==e.model||"ipad"==e.model)}function getDevice(){return Modernizr.Detectizr.device}function resizeIframe(e){e.style.height=e.contentWindow.document.body.scrollHeight+"px"}function str_trim(e){return e.toString().trim()}function number_format(e,t,n,i){var o,a,s,r,l;return isNaN(t=Math.abs(t))&&(t=2),void 0==n&&(n=","),void 0==i&&(i="."),o=parseInt(e=(+e||0).toFixed(t))+"",(a=o.length)>3?a%=3:a=0,l=a?o.substr(0,a)+i:"",s=o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+i),r=t?n+Math.abs(e-o).toFixed(t).replace(/-/,0).slice(2):"",l+s+r}function array_key_exists(e,t){return!t||t.constructor!==Array&&t.constructor!==Object?!1:void 0!==t[e]}function count(e,t){var n,i=0;"COUNT_RECURSIVE"==t&&(t=1),1!=t&&(t=0);for(n in e)i++,1!=t||!e[n]||e[n].constructor!==Array&&e[n].constructor!==Object||(i+=count(e[n],1));return i}function strpos(e,t,n){var i=e.indexOf(t,n);return i>=0?i:!1}function empty(e){return""===e||0===e||"0"===e||null===e||e===!1||"undefined"===e||"undefined"==typeof e||is_array(e)&&0===e.length}function is_array(e){return e instanceof Array}function is_object(e){return e instanceof Array?!1:null!==e&&"object"==typeof e}function in_array(e,t,n){var i,o=!1,n=!!n;for(i in t)if(n&&t[i]===e||!n&&t[i]==e){o=!0;break}return o}function md5(e){var t,n,i,o,a,s,r,l,c,d=function(e,t){return e<<t|e>>>32-t},u=function(e,t){var n,i,o,a,s;return o=2147483648&e,a=2147483648&t,n=1073741824&e,i=1073741824&t,s=(1073741823&e)+(1073741823&t),n&i?2147483648^s^o^a:n|i?1073741824&s?3221225472^s^o^a:1073741824^s^o^a:s^o^a},p=function(e,t,n){return e&t|~e&n},f=function(e,t,n){return e&n|t&~n},h=function(e,t,n){return e^t^n},m=function(e,t,n){return t^(e|~n)},v=function(e,t,n,i,o,a,s){return e=u(e,u(u(p(t,n,i),o),s)),u(d(e,a),t)},b=function(e,t,n,i,o,a,s){return e=u(e,u(u(f(t,n,i),o),s)),u(d(e,a),t)},_=function(e,t,n,i,o,a,s){return e=u(e,u(u(h(t,n,i),o),s)),u(d(e,a),t)},g=function(e,t,n,i,o,a,s){return e=u(e,u(u(m(t,n,i),o),s)),u(d(e,a),t)},w=function(e){for(var t,n=e.length,i=n+8,o=(i-i%64)/64,a=16*(o+1),s=Array(a-1),r=0,l=0;n>l;)t=(l-l%4)/4,r=l%4*8,s[t]=s[t]|e.charCodeAt(l)<<r,l++;return t=(l-l%4)/4,r=l%4*8,s[t]=s[t]|128<<r,s[a-2]=n<<3,s[a-1]=n>>>29,s},k=function(e){var t,n,i="",o="";for(n=0;3>=n;n++)t=e>>>8*n&255,o="0"+t.toString(16),i+=o.substr(o.length-2,2);return i},y=Array(),C=7,$=12,x=17,z=22,j=5,S=9,M=14,F=20,D=4,A=11,P=16,I=23,O=6,T=10,U=15,B=21;for(e=this.utf8_encode(e),y=w(e),s=1732584193,r=4023233417,l=2562383102,c=271733878,t=0;t<y.length;t+=16)n=s,i=r,o=l,a=c,s=v(s,r,l,c,y[t+0],C,3614090360),c=v(c,s,r,l,y[t+1],$,3905402710),l=v(l,c,s,r,y[t+2],x,606105819),r=v(r,l,c,s,y[t+3],z,3250441966),s=v(s,r,l,c,y[t+4],C,4118548399),c=v(c,s,r,l,y[t+5],$,1200080426),l=v(l,c,s,r,y[t+6],x,2821735955),r=v(r,l,c,s,y[t+7],z,4249261313),s=v(s,r,l,c,y[t+8],C,1770035416),c=v(c,s,r,l,y[t+9],$,2336552879),l=v(l,c,s,r,y[t+10],x,4294925233),r=v(r,l,c,s,y[t+11],z,2304563134),s=v(s,r,l,c,y[t+12],C,1804603682),c=v(c,s,r,l,y[t+13],$,4254626195),l=v(l,c,s,r,y[t+14],x,2792965006),r=v(r,l,c,s,y[t+15],z,1236535329),s=b(s,r,l,c,y[t+1],j,4129170786),c=b(c,s,r,l,y[t+6],S,3225465664),l=b(l,c,s,r,y[t+11],M,643717713),r=b(r,l,c,s,y[t+0],F,3921069994),s=b(s,r,l,c,y[t+5],j,3593408605),c=b(c,s,r,l,y[t+10],S,38016083),l=b(l,c,s,r,y[t+15],M,3634488961),r=b(r,l,c,s,y[t+4],F,3889429448),s=b(s,r,l,c,y[t+9],j,568446438),c=b(c,s,r,l,y[t+14],S,3275163606),l=b(l,c,s,r,y[t+3],M,4107603335),r=b(r,l,c,s,y[t+8],F,1163531501),s=b(s,r,l,c,y[t+13],j,2850285829),c=b(c,s,r,l,y[t+2],S,4243563512),l=b(l,c,s,r,y[t+7],M,1735328473),r=b(r,l,c,s,y[t+12],F,2368359562),s=_(s,r,l,c,y[t+5],D,4294588738),c=_(c,s,r,l,y[t+8],A,2272392833),l=_(l,c,s,r,y[t+11],P,1839030562),r=_(r,l,c,s,y[t+14],I,4259657740),s=_(s,r,l,c,y[t+1],D,2763975236),c=_(c,s,r,l,y[t+4],A,1272893353),l=_(l,c,s,r,y[t+7],P,4139469664),r=_(r,l,c,s,y[t+10],I,3200236656),s=_(s,r,l,c,y[t+13],D,681279174),c=_(c,s,r,l,y[t+0],A,3936430074),l=_(l,c,s,r,y[t+3],P,3572445317),r=_(r,l,c,s,y[t+6],I,76029189),s=_(s,r,l,c,y[t+9],D,3654602809),c=_(c,s,r,l,y[t+12],A,3873151461),l=_(l,c,s,r,y[t+15],P,530742520),r=_(r,l,c,s,y[t+2],I,3299628645),s=g(s,r,l,c,y[t+0],O,4096336452),c=g(c,s,r,l,y[t+7],T,1126891415),l=g(l,c,s,r,y[t+14],U,2878612391),r=g(r,l,c,s,y[t+5],B,4237533241),s=g(s,r,l,c,y[t+12],O,1700485571),c=g(c,s,r,l,y[t+3],T,2399980690),l=g(l,c,s,r,y[t+10],U,4293915773),r=g(r,l,c,s,y[t+1],B,2240044497),s=g(s,r,l,c,y[t+8],O,1873313359),c=g(c,s,r,l,y[t+15],T,4264355552),l=g(l,c,s,r,y[t+6],U,2734768916),r=g(r,l,c,s,y[t+13],B,1309151649),s=g(s,r,l,c,y[t+4],O,4149444226),c=g(c,s,r,l,y[t+11],T,3174756917),l=g(l,c,s,r,y[t+2],U,718787259),r=g(r,l,c,s,y[t+9],B,3951481745),s=u(s,n),r=u(r,i),l=u(l,o),c=u(c,a);var E=k(s)+k(r)+k(l)+k(c);return E.toLowerCase()}function send_event(e,t){var n=["_trackEvent",window.document.title+(window.gClid?" (adwords)":""),e,t];return window._gaq&&_gaq.push(n),!0}var objSwiperSlider=new CSwiperSlider,SwiperSlider=objSwiperSlider.init(),objCallback=new CCallback,Callback=objCallback.init(),objMenu=new MegaMenu,MainMenu=objMenu.init(),MobileMenu=objMenu.init_mobile(),SubMenu=objMenu.init_sub(),objSearch=new LiveSearch,Search=objSearch.init(),objBasket=new CBasket,Basket=objBasket.init(),objModal=new CModal,Modal=objModal.init(),objRequestModalForm=new RequestModalForm,RequestForm=objRequestModalForm.init();Modernizr.Detectizr.detect({addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!0}),$(function(){$(".select").niceSelect(),Callback.initialize(),MobileMenu.initialize(),MainMenu.initialize(),SubMenu.initialize(),Search.initialize(),Basket.initialize(),Modal.initialize(),$(document).on("click",".spin-edit button",function(e){e.preventDefault();var t=$(this),n=t.closest(".spin-edit").hasClass("js-ready"),i=t.hasClass("spin-up"),o=(t.hasClass("spin-down"),t.siblings('input[type="text"]')),a=t.closest(".spin-edit").data("min-val")||0,s=parseInt(o.val()),r=i?s+1:s-1;return n?void(r>=a&&o.val(r).change()):!1}).on("change",'.spin-edit input[type="text"]',function(e){e.preventDefault();var t=$(this),n=t.closest(".spin-edit").hasClass("js-ready"),i=(t.siblings(".spin-up"),t.siblings(".spin-down")),o=t.closest(".spin-edit").data("min-val")||0,a=parseInt(t.val());return n?void(o>=a?i.addClass("spin-del"):i.removeClass("spin-del")):!1}),$(".product-grid").on("mouseenter",".product-item .pic label",function(){var e=$(this),t=e.data("href"),n=e.data("img-src"),i=e.data("title"),o=e.closest(".product-item");e.closest(".pic").siblings(".pic").removeClass("checked"),e.closest(".pic").addClass("checked"),o.find(".product-grid-name").text(i),o.find(".product-grid-name,.product-grid-image").prop("href",t),o.find(".product-grid-image").children("img").prop("src",n)}).on("mouseleave",".product-item",function(){var e=$(this),t=e.find('.pic[data-color-id="'+e.data("color-id")+'"]'),n=e.data("img-src"),i=e.data("title"),o=e.data("href");t.siblings(".pic").removeClass("checked"),t.addClass("checked"),
e.find(".product-grid-name").text(i),e.find(".product-grid-name,.product-grid-image").prop("href",o),e.find(".product-grid-image").children("img").prop("src",n)}),$("img.lazy").lazyload()}),$(document).ajaxSuccess(function(){setTimeout(function(){$("img.lazy").lazyload()},160)}),$(window).on("scroll",function(){var e=verge.scrollY();e>100?$(".header-container,.page-body").addClass("scroll"):$(".header-container,.page-body").removeClass("scroll");var t=document.getElementById("scrollup");"undefined"!=typeof t&&t.length&&(e>200?t.style.display="block":t.style.display="none")}).on("resize",function(){var e=getMobileWidth();e>960&&"undefined"!=typeof MobileFilters&&MobileFilters.active&&MobileFilters.close(),Search.adjust()}).on("load",function(){$(document).delegate("a","click",function(e){var t=$(this).attr("href"),n=new RegExp("^#([A-z0-9]+)?");if(null!==t.match(n)){if(e.preventDefault(),t.length>1){var i=t.substring(1),o=document.getElementById(i);if($(o).length){var a=$(o).offset();scrollTo(0,Math.floor(a.top-100))}}return!1}}),$.map($(document).find(".brand-swiper-element"),function(e){SwiperSlider.construct($(e).children(".swiper-container"),{slidesPerView:"auto",spaceBetween:18,freeMode:!0,preventClicks:!1,preventClicksPropagation:!1,navigation:{nextEl:$(e).find(".swiper-button-next"),prevEl:$(e).find(".swiper-button-prev")}})}),$.map($(document).find(".product-swiper-element"),function(e,t){$(e).children(".swiper-container").addClass("product-swiper-container-"+t),SwiperSlider.construct(".product-swiper-container-"+t,{slidesPerView:6,spaceBetween:2,observer:!0,observeParents:!0,navigation:{nextEl:$(e).find(".swiper-button-next"),prevEl:$(e).find(".swiper-button-prev")},scrollbar:{el:$(e).find(".swiper-scrollbar"),draggable:!0,hide:!1},breakpoints:{1700:{slidesPerView:5},1440:{slidesPerView:4},960:{slidesPerView:3},640:{slidesPerView:2}}})}),$.map($(document).find(".pop-brand-swiper-element"),function(e){SwiperSlider.construct($(e).children(".swiper-container"),{slidesPerView:"auto",preventClicks:!1,spaceBetween:40,preventClicksPropagation:!1,navigation:{nextEl:$(e).find(".swiper-button-next"),prevEl:$(e).find(".swiper-button-prev")},scrollbar:{el:$(e).find(".swiper-scrollbar"),draggable:!0,hide:!0}})}),$.map($(document).find(".print-swiper-element"),function(e){SwiperSlider.construct($(e).children(".swiper-container"),{slidesPerView:9,preventClicks:!1,preventClicksPropagation:!1,navigation:{nextEl:$(e).find(".swiper-button-next"),prevEl:$(e).find(".swiper-button-prev")},breakpoints:{1690:{slidesPerView:8},1520:{slidesPerView:7},1380:{slidesPerView:6},1200:{slidesPerView:5},1024:{slidesPerView:4},820:{slidesPerView:3},640:{slidesPerView:2}}})})}),function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.wNumb=e()}(function(){"use strict";function e(e){return e.split("").reverse().join("")}function t(e,t){return e.substring(0,t.length)===t}function n(e,t){return e.slice(-1*t.length)===t}function i(e,t,n){if((e[t]||e[n])&&e[t]===e[n])throw new Error(t)}function o(e){return"number"==typeof e&&isFinite(e)}function a(e,t){return e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]+t:t))),e=e.toString().split("e"),(+(e[0]+"e"+(e[1]?+e[1]-t:-t))).toFixed(t)}function s(t,n,i,s,r,l,c,d,u,p,f,h){var m,v,b,_=h,g="",w="";return l&&(h=l(h)),o(h)?(t!==!1&&0===parseFloat(h.toFixed(t))&&(h=0),0>h&&(m=!0,h=Math.abs(h)),t!==!1&&(h=a(h,t)),h=h.toString(),-1!==h.indexOf(".")?(v=h.split("."),b=v[0],i&&(g=i+v[1])):b=h,n&&(b=e(b).match(/.{1,3}/g),b=e(b.join(e(n)))),m&&d&&(w+=d),s&&(w+=s),m&&u&&(w+=u),w+=b,w+=g,r&&(w+=r),p&&(w=p(w,_)),w):!1}function r(e,i,a,s,r,l,c,d,u,p,f,h){var m,v="";return f&&(h=f(h)),h&&"string"==typeof h?(d&&t(h,d)&&(h=h.replace(d,""),m=!0),s&&t(h,s)&&(h=h.replace(s,"")),u&&t(h,u)&&(h=h.replace(u,""),m=!0),r&&n(h,r)&&(h=h.slice(0,-1*r.length)),i&&(h=h.split(i).join("")),a&&(h=h.replace(a,".")),m&&(v+="-"),v+=h,v=v.replace(/[^0-9\.\-.]/g,""),""===v?!1:(v=Number(v),c&&(v=c(v)),o(v)?v:!1)):!1}function l(e){var t,n,o,a={};for(void 0===e.suffix&&(e.suffix=e.postfix),t=0;t<u.length;t+=1)if(n=u[t],o=e[n],void 0===o)"negative"!==n||a.negativeBefore?"mark"===n&&"."!==a.thousand?a[n]=".":a[n]=!1:a[n]="-";else if("decimals"===n){if(!(o>=0&&8>o))throw new Error(n);a[n]=o}else if("encoder"===n||"decoder"===n||"edit"===n||"undo"===n){if("function"!=typeof o)throw new Error(n);a[n]=o}else{if("string"!=typeof o)throw new Error(n);a[n]=o}return i(a,"mark","thousand"),i(a,"prefix","negative"),i(a,"prefix","negativeBefore"),a}function c(e,t,n){var i,o=[];for(i=0;i<u.length;i+=1)o.push(e[u[i]]);return o.push(n),t.apply("",o)}function d(e){return this instanceof d?void("object"==typeof e&&(e=l(e),this.to=function(t){return c(e,s,t)},this.from=function(t){return c(e,r,t)})):new d(e)}var u=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];return d});